gj.draggable={plugins:{}},gj.draggable.config={base:{handle:void 0,vertical:!0,horizontal:!0,containment:void 0}},gj.draggable.methods={init:function(e){var t,a=this.element;return gj.widget.prototype.init.call(this,e),e=this.getConfig(),a.setAttribute("data-gj-draggable","true"),(t=gj.draggable.methods.getHandleElement(a,e)).addEventListener("mousedown",gj.draggable.methods.createDownHandle(this,a,e)),t.addEventListener("touchstart",gj.draggable.methods.createDownHandle(this,a,e)),gj.documentManager.subscribeForEvent("mouseup",e.guid,gj.draggable.methods.createUpHandler(this,a,e)),gj.documentManager.subscribeForEvent("touchend",e.guid,gj.draggable.methods.createUpHandler(this,a,e)),gj.documentManager.subscribeForEvent("touchcancel",e.guid,gj.draggable.methods.createUpHandler(this,a,e)),this},createDownHandle:function(a,r,g){return function(e){var t=gj.core.position(r);r.style.top=t.top+"px",r.style.left=t.left+"px",r.style.position="fixed",r.setAttribute("data-gj-draggable-dragging",!0),r.removeAttribute("data-gj-draggable-x"),r.removeAttribute("data-gj-draggable-y"),gj.documentManager.subscribeForEvent("touchmove",g.guid,gj.draggable.methods.createMoveHandler(a,r,g)),gj.documentManager.subscribeForEvent("mousemove",g.guid,gj.draggable.methods.createMoveHandler(a,r,g))}},getHandleElement:function(e,t){return t.handle||e},createUpHandler:function(t,a,r){return function(e){"true"===a.getAttribute("data-gj-draggable-dragging")&&(a.setAttribute("data-gj-draggable-dragging",!1),gj.documentManager.unsubscribeForEvent("mousemove",r.guid),gj.documentManager.unsubscribeForEvent("touchmove",r.guid),gj.draggable.events.stop(a,{x:t.mouseX(e),y:t.mouseY(e)}))}},createMoveHandler:function(g,n,o){return function(e){var t,a,r;"true"===n.getAttribute("data-gj-draggable-dragging")&&(t=Math.round(g.mouseX(e)),e=Math.round(g.mouseY(e)),a=n.getAttribute("data-gj-draggable-x"),r=n.getAttribute("data-gj-draggable-y"),a&&r?(a=o.horizontal?t-parseInt(a,10):0,r=o.vertical?e-parseInt(r,10):0,gj.draggable.methods.move(n,o,a,r,t,e)):gj.draggable.events.start(n,t,e),n.setAttribute("data-gj-draggable-x",t),n.setAttribute("data-gj-draggable-y",e))}},move:function(e,t,a,r,g,n){var o,d,i=gj.core.position(e),r=i.top+r,a=i.left+a;t.containment&&(d=(o=gj.core.position(t.containment)).top+gj.core.height(t.containment)-gj.core.height(e),t=o.left+gj.core.width(t.containment)-gj.core.width(e),r>o.top&&r<d?(o.top>=n||o.bottom<=n)&&(r=i.top):r=r<=o.top?o.top+1:d-1,a>o.left&&a<t?(o.left>=g||o.right<=g)&&(a=i.left):a=a<=o.left?o.left+1:t-1),!1!==gj.draggable.events.drag(e,a,r,g,n)&&(e.style.top=r+"px",e.style.left=a+"px")},destroy:function(e){var t;return"true"===e.getAttribute("data-gj-draggable")&&(gj.documentManager.unsubscribeForEvent("mouseup",data.guid),gijgoStorage.remove(e,e.getAttribute("data-type")),e.removeAttribute("data-gj-guid"),e.removeAttribute("data-gj-type"),e.removeAttribute("data-gj-draggable"),e.removeAttribute("data-gj-draggable-x"),e.removeAttribute("data-gj-draggable-y"),e.removeAttribute("data-gj-draggable-dragging"),e.style.top="",e.style.left="",e.style.position="",e.removeEventListener("drag"),e.removeEventListener("start"),e.removeEventListener("stop"),(t=gj.draggable.methods.getHandleElement(e,data)).removeEventListener("mousedown"),t.removeEventListener("touchstart")),e}},gj.draggable.events={drag:function(e,t,a,r,g){t=new CustomEvent("drag",{detail:{newPosition:{left:t,top:a},mousePosition:{x:r,y:g}}});return e.dispatchEvent(t)},start:function(e,t,a){return e.dispatchEvent(new CustomEvent("start",{detail:{x:t,y:a}}))},stop:function(e,t){return e.dispatchEvent(new CustomEvent("stop",{detail:t}))}},(GijgoDraggable=function(e,t){var a=this,r=gj.draggable.methods;return a.type="draggable",a.element=e,a.destroy=function(){return r.destroy(this)},"true"!==e.getAttribute("data-gj-draggable")&&r.init.call(a,t),a}).prototype=new gj.widget,GijgoDraggable.constructor=GijgoDraggable,"undefined"!=typeof jQuery&&(jQuery.fn.draggable=function(e){var t;if(this&&this.length){if("object"!=typeof e&&e){if((t=new GijgoDraggable(this[0],null))[e])return t[e].apply(this[0],Array.prototype.slice.call(arguments,1));throw"Method "+e+" does not exist."}return new GijgoDraggable(this[0],e)}});