gj.dropdown={plugins:{}},gj.dropdown.config={base:{dataSource:void 0,textField:"text",valueField:"value",selectedField:"selected",width:void 0,maxHeight:"auto",placeholder:void 0,fontSize:void 0,uiLibrary:"materialdesign",iconsLibrary:"materialicons",icons:{dropdown:'<i class="gj-icon arrow-dropdown" />',dropup:'<i class="gj-icon arrow-dropup" />'},style:{wrapper:"gj-dropdown gj-dropdown-md gj-unselectable",list:"gj-list gj-list-md gj-dropdown-list-md",active:"gj-list-md-active"}},bootstrap:{style:{wrapper:"gj-dropdown gj-dropdown-bootstrap gj-dropdown-bootstrap-3 gj-unselectable",presenter:"btn btn-default",list:"gj-list gj-list-bootstrap gj-dropdown-list-bootstrap list-group",item:"list-group-item",active:"active"},iconsLibrary:"glyphicons"},bootstrap4:{style:{wrapper:"gj-dropdown gj-dropdown-bootstrap gj-dropdown-bootstrap-4 gj-unselectable",presenter:"btn btn-outline-secondary",list:"gj-list gj-list-bootstrap gj-dropdown-list-bootstrap list-group",item:"list-group-item",active:"active"}},bootstrap5:{style:{wrapper:"gj-dropdown gj-dropdown-bootstrap gj-dropdown-bootstrap-4 gj-unselectable",presenter:"btn btn-outline-secondary",list:"gj-list gj-list-bootstrap gj-dropdown-list-bootstrap list-group",item:"list-group-item",active:"active"}},materialicons:{style:{expander:"gj-dropdown-expander-mi"}},fontawesome:{icons:{dropdown:'<i class="fa fa-caret-down" aria-hidden="true"></i>',dropup:'<i class="fa fa-caret-up" aria-hidden="true"></i>'},style:{expander:"gj-dropdown-expander-fa"}},glyphicons:{icons:{dropdown:'<span class="caret"></span>',dropup:'<span class="dropup"><span class="caret" ></span></span>'},style:{expander:"gj-dropdown-expander-glyphicons"}}},gj.dropdown.methods={init:function(e){return gj.widget.prototype.init.call(this,e),this.element.setAttribute("data-gj-dropdown","true"),gj.dropdown.methods.initialize(this),this},initialize:function(t){var e=t.element;data=t.getConfig(),wrapper=t.wrap("div"),display=document.createElement("span"),expander=document.createElement("span"),presenter=document.createElement("button"),list=document.createElement("ul"),data.fontSize&&(presenter.style.fontSize=data.fontSize),presenter.setAttribute("type","button"),presenter.setAttribute("data-gj-role","presenter"),gj.core.addClasses(presenter,data.style.presenter),presenter.addEventListener("click",function(e){"none"!==list.style.display?gj.dropdown.methods.close(t,list):gj.dropdown.methods.open(t,list)}),presenter.addEventListener("blur",function(e){setTimeout(function(){gj.dropdown.methods.close(t,list)},500)}),display.setAttribute("data-gj-role","display"),presenter.appendChild(display),expander.setAttribute("data-gj-role","expander"),expander.innerHTML=data.icons.dropdown,gj.core.addClasses(expander,data.style.expander),presenter.appendChild(expander),t.element.style.display="none",wrapper.appendChild(presenter),list.setAttribute("data-gj-role","list"),gj.core.addClasses(list,data.style.list),list.setAttribute("data-gj-guid",e.getAttribute("data-gj-guid")),list.style.display="none",document.body.appendChild(list),t.reload()},setListPosition:function(e,t,o){let r,n,d,a,l=e.getBoundingClientRect(),i=window.scrollY||window.pageYOffset||0;window.scrollX||window.pageXOffset;t.style.overflow="",t.style.overflowX="",t.style.height="",gj.core.setChildPosition(e,t),r=gj.core.height(t,!0),a=t.getBoundingClientRect(),n=gj.core.height(e,!0),"auto"===o.maxHeight?l.top<a.top?l.top+r+n>window.innerHeight&&(d=window.innerHeight-l.top-n-3):0<l.top-r-3?t.style.top=Math.round(l.top+i-r-3)+"px":(t.style.top=i+"px",d=l.top-3):!isNaN(o.maxHeight)&&o.maxHeight<r&&(d=o.maxHeight),d&&(t.style.overflow="scroll",t.style.overflowX="hidden",t.style.height=d+"px")},useHtmlDataSource:function(e,t){let o=[],r,n,d=e.element.getElementsByTagName("option");for(r=0;r<d.length;r++)(n={})[t.valueField]=d[r].value,n[t.textField]=d[r].innerHTML,n[t.selectedField]=e.element[0].value===d[r].value,o.push(n);t.dataSource=o},filter:function(e){let t,o,r=e.getConfig();if(r.dataSource){if("string"==typeof r.dataSource[0])for(t=0;t<r.dataSource.length;t++)(o={})[r.valueField]=r.dataSource[t],o[r.textField]=r.dataSource[t],r.dataSource[t]=o}else r.dataSource=[];return r.dataSource},createListItem:function(t,e,o,r,n){var d=document.createElement("li"),a=document.createElement("option");d.setAttribute("value",o),d.innerHTML='<div data-gj-role="wrapper"><span data-gj-role="display">'+r+"</span></div>",gj.core.addClasses(d,n),d.addEventListener("click",function(e){gj.dropdown.methods.select(t,o)}),e.appendChild(d),a.setAttribute("value",o),a.text=r,t.element.appendChild(a)},render:function(e,t){let o,r,n=[],d=e.getConfig(),a=e.element.parentNode,l=document.body.querySelector('[data-gj-role="list"][data-gj-guid="'+e.element.getAttribute("data-gj-guid")+'"]'),i=a.querySelector('[data-gj-role="presenter"]'),s=(i.querySelector('[data-gj-role="expander"]'),i.querySelector('[data-gj-role="display"]'));if(e.setRecords(t),e.element.innerHTML="",l.innerHTML="",t&&t.length){for(const p of t)gj.dropdown.methods.createListItem(e,l,p[d.valueField],p[d.textField],d.style.item),p[d.selectedField]&&"true"===p[d.selectedField].toString().toLowerCase()&&n.push(p[d.valueField]);if(0===n.length)(r=document.createElement("option")).setAttribute("value",""),e.element.insertBefore(r,e.element.firstChild),e.element.selectedIndex=0,d.placeholder&&(s.innerHTML='<span class="placeholder">'+d.placeholder+"</span>");else for(o=0;o<n.length;o++)gj.dropdown.methods.select(e,n[o])}return d.width&&(gj.core.css(a,"width",d.width),gj.core.css(i,"width",d.width)),d.fontSize&&(l.style.fontSize=d.fontSize),gj.dropdown.events.dataBound(e.element),e},open:function(e,t){let o=e.getConfig(),r=e.element.parentNode.querySelector('[data-gj-role="expander"]'),n=e.element.parentNode.querySelector('[data-gj-role="presenter"]'),d=gj.core.getScrollParent(e.element);t.style.width=gj.core.width(n)+"px",t.style.display="block",gj.dropdown.methods.setListPosition(n,t,o),r.innerHTML=o.icons.dropup,d&&(o.parentScrollHandler=function(){gj.dropdown.methods.setListPosition(n,t,o)},gj.dropdown.methods.addParentsScrollListener(d,o.parentScrollHandler))},close:function(e,t){var o=e.getConfig(),r=e.element.parentNode.querySelector('[data-gj-role="expander"]'),e=gj.core.getScrollParent(e.element);r.innerHTML=o.icons.dropdown,e&&o.parentScrollHandler&&gj.dropdown.methods.removeParentsScrollListener(e,o.parentScrollHandler),t.style.display="none"},addParentsScrollListener:function(e,t){var o=gj.core.getScrollParent(e.parentNode);e.addEventListener("scroll",t),o&&gj.dropdown.methods.addParentsScrollListener(o,t)},removeParentsScrollListener:function(e,t){var o=gj.core.getScrollParent(e.parentNode);e.removeEventListener("scroll",t),o&&gj.dropdown.methods.removeParentsScrollListener(o,t)},select:function(e,t){let o=e.getConfig(),r=document.body.querySelector('[data-gj-role="list"][data-gj-guid="'+e.element.getAttribute("data-gj-guid")+'"]'),n=r.querySelector('li[value="'+t+'"]'),d=e.element.parentNode.querySelector('[data-gj-role="presenter"] [data-gj-role="display"]'),a=gj.dropdown.methods.getRecordByValue(e,t);return r.querySelectorAll("li").forEach(function(e){e.classList.remove(o.style.active)}),a?(n.classList.add(o.style.active),e.element.value=t,d.innerHTML=a[o.textField]):(o.placeholder&&(d.innerHTML='<span class="placeholder">'+o.placeholder+"</span>"),e.element.value=""),gj.dropdown.events.change(e.element),gj.dropdown.methods.close(e,r),e},getRecordByValue:function(e,t){let o=e.getRecords(),r,n=void 0;for(r=0;r<o.length;r++)if(o[r][data.valueField]===t){n=o[r];break}return n},value:function(e,t){return void 0===t?e.element.value:(gj.dropdown.methods.select(e,t),e)},destroy:function(e){var t=e.getConfig(),o=e.element,r=e.element.parentNode;return t&&(e.xhr&&e.xhr.abort(),e.off(),e.removeConfig(),e.removeRecords(),o.removeAttribute("data-gj-type"),o.removeAttribute("data-gj-guid"),o.removeAttribute("data-gj-dropdown"),o.className="",r&&(r.querySelector('[data-gj-role="presenter"]').remove(),document.body.querySelector('[data-gj-role="list"]').remove()),e.unwrap(),o.style.display="block"),e}},gj.dropdown.events={change:function(e){return e.dispatchEvent(new Event("change"))},dataBound:function(e){return e.dispatchEvent(new Event("dataBound"))}},(GijgoDropDown=function(e,t){let o=this,r=gj.dropdown.methods;return o.type="dropdown",o.element=e,o.value=function(e){return r.value(this,e)},o.enable=function(){return r.enable(this)},o.disable=function(){return r.disable(this)},o.destroy=function(){return r.destroy(this)},"true"!==e.getAttribute("data-gj-dropdown")&&r.init.call(o,t),o}).prototype=new gj.widget,GijgoDropDown.constructor=GijgoDropDown,"undefined"!=typeof jQuery&&(jQuery.fn.dropdown=function(e){var t;if(this&&this.length){if("object"!=typeof e&&e){if((t=new GijgoDropDown(this,null))[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+e+" does not exist."}return new GijgoDropDown(this,e)}});