gj.timepicker={plugins:{},messages:{"en-us":{am:"AM",pm:"PM",ok:"Ok",cancel:"Cancel"}}},gj.timepicker.config={base:{width:void 0,modal:!0,header:!0,footer:!0,format:"HH:MM",uiLibrary:"materialdesign",value:void 0,mode:"ampm",locale:"en-us",icons:{rightIcon:'<i class="gj-icon clock" />'},style:{modal:"gj-modal",wrapper:"gj-timepicker gj-timepicker-md gj-unselectable",input:"gj-textbox-md",clock:"gj-clock gj-clock-md",footer:"",button:"gj-button-md"}},bootstrap:{style:{wrapper:"gj-timepicker gj-timepicker-bootstrap gj-unselectable input-group",input:"form-control",clock:"gj-clock gj-clock-bootstrap",footer:"modal-footer",button:"btn btn-default"},iconsLibrary:"glyphicons"},bootstrap4:{style:{wrapper:"gj-timepicker gj-timepicker-bootstrap gj-unselectable input-group",input:"form-control",clock:"gj-clock gj-clock-bootstrap",footer:"modal-footer",button:"btn btn-default"},showOtherMonths:!0}},gj.timepicker.methods={init:function(a){return gj.widget.prototype.init.call(this,a,"timepicker"),this.attr("data-timepicker","true"),gj.timepicker.methods.initialize(this),this},initialize:function(a){var b,c,d=a.data(),e=a.parent('div[role="wrapper"]');c="bootstrap"===d.uiLibrary?$('<span class="input-group-addon">'+d.icons.rightIcon+"</span>"):"bootstrap4"===d.uiLibrary?$('<span class="input-group-append"><span class="input-group-text">'+d.icons.rightIcon+"</span></span>"):$(d.icons.rightIcon),c.attr("role","right-icon"),0===e.length?(e=$('<div role="wrapper" />').addClass(d.style.wrapper),a.wrap(e)):e.addClass(d.style.wrapper),e=a.parent('div[role="wrapper"]'),d.width&&e.css("width",d.width),a.val(d.value).addClass(d.style.input).attr("role","input"),c.on("click",function(b){$("body").find('[role="clock"][guid="'+a.attr("data-guid")+'"]').is(":visible")?gj.timepicker.methods.close(a):gj.timepicker.methods.open(a)}),!1===d.footer&&a.on("blur",function(){a.timeout=setTimeout(function(){a.mouseMove||gj.timepicker.methods.close(a)},500)}),e.append(c),b=gj.timepicker.methods.createClock(a),d.keyboardNavigation&&a.on("keydown",gj.timepicker.methods.createKeyDownHandler(a,b))},createClock:function(a){var b,c=a.data(),d=$('<div role="clock" />').addClass(c.style.clock).attr("guid",a.attr("data-guid")),e=$('<div role="hour" />'),f=$('<div role="minute" />'),g=$('<div role="header" />'),h=$('<div role="mode" />'),i=$('<div role="body" />'),j=$('<div role="dial"></div>'),k=$('<button class="'+c.style.button+'">'+gj.timepicker.messages[c.locale].ok+"</button>"),l=$('<button class="'+c.style.button+'">'+gj.timepicker.messages[c.locale].cancel+"</button>"),m=$('<div role="footer" class="'+c.style.footer+'" />');return b=gj.core.parseDate(c.value,c.format,c.locale),!b||isNaN(b.getTime())?b=new Date:a.attr("hours",b.getHours()),j.on("mousedown",gj.timepicker.methods.mouseDownHandler(a,d)),j.on("mousemove",gj.timepicker.methods.mouseMoveHandler(a,d)),j.on("mouseup",gj.timepicker.methods.mouseUpHandler(a,d)),c.header&&(e.on("click",function(){gj.timepicker.methods.renderHours(a,d)}),f.on("click",function(){gj.timepicker.methods.renderMinutes(a,d)}),g.append(e).append(":").append(f),"ampm"===c.mode&&(h.append($('<span role="am">'+gj.timepicker.messages[c.locale].am+"</span>").on("click",function(){var b=gj.timepicker.methods.getHour(d);d.attr("mode","am"),$(this).addClass("selected"),$(this).parent().children('[role="pm"]').removeClass("selected"),b>=12&&d.attr("hour",b-12),c.modal||(clearTimeout(a.timeout),a.focus())})),h.append("<br />"),h.append($('<span role="pm">'+gj.timepicker.messages[c.locale].pm+"</span>").on("click",function(){var b=gj.timepicker.methods.getHour(d);d.attr("mode","pm"),$(this).addClass("selected"),$(this).parent().children('[role="am"]').removeClass("selected"),b<12&&d.attr("hour",b+12),c.modal||(clearTimeout(a.timeout),a.focus())})),g.append(h)),d.append(g)),i.append(j),d.append(i),c.footer&&(l.on("click",function(){a.close()}),m.append(l),k.on("click",gj.timepicker.methods.setTime(a,d)),m.append(k),d.append(m)),d.hide(),$("body").append(d),c.modal&&(d.wrapAll('<div role="modal" class="'+c.style.modal+'"/>'),gj.core.center(d)),d},getHour:function(a){return parseInt(a.attr("hour"),10)||0},getMinute:function(a){return parseInt(a.attr("minute"),10)||0},setTime:function(a,b){return function(){var c=gj.timepicker.methods.getHour(b),d=gj.timepicker.methods.getMinute(b),e=b.attr("mode"),f=new Date(0,0,0,12===c&&"am"===e?0:c,d),g=a.data(),h=gj.core.formatDate(f,g.format,g.locale);a.value(h),a.close()}},getPointerValue:function(a,b,c){var d,e,f=256,g=Math.atan2(f/2-a,f/2-b)/Math.PI*180;switch(g<0&&(g=360+g),c){case"ampm":return d=12-Math.round(12*g/360),0===d?12:d;case"24hr":return e=Math.sqrt(Math.pow(f/2-a,2)+Math.pow(f/2-b,2)),d=12-Math.round(12*g/360),0===d&&(d=12),e<f/2-32&&(d=12===d?0:d+12),d;case"minutes":return d=Math.round(60-60*g/360),60===d?0:d}},updateArrow:function(a,b,c){var d,e,f,g,h=b.data();d=b.mouseX(a),e=b.mouseY(a),f=a.target.getBoundingClientRect(),"hours"==h.dialMode?(g=gj.timepicker.methods.getPointerValue(d-f.left,e-f.top,h.mode),c.attr("hour","ampm"===h.mode&&"pm"===c.attr("mode")&&g<12?g+12:g)):"minutes"==h.dialMode&&(g=gj.timepicker.methods.getPointerValue(d-f.left,e-f.top,"minutes"),c.attr("minute",g)),"hours"==h.dialMode?setTimeout(function(){gj.timepicker.methods.renderMinutes(b,c)},1e3):"minutes"==h.dialMode&&0==b.data().footer&&gj.timepicker.methods.setTime(b,c)(),gj.timepicker.methods.select(b,c)},select:function(a,b){var c=(b.find('[role="dial"]'),b.find('[role="arrow"]')),d=a.data(),e=gj.timepicker.methods.getHour(b),f=gj.timepicker.methods.getMinute(b);"hours"==d.dialMode&&(0==e||e>12)&&"24hr"===d.mode?c.css("width","calc(50% - 52px)"):c.css("width","calc(50% - 20px)"),"hours"==d.dialMode?c.css("transform","rotate("+(30*e-90).toString()+"deg)"):c.css("transform","rotate("+(6*f-90).toString()+"deg)"),c.show(),gj.timepicker.methods.update(a,b)},update:function(a,b){var c=a.data(),d=gj.timepicker.methods.getHour(b),e="ampm"===c.mode&&d>12?d-12:0==d?12:d,f=gj.timepicker.methods.getMinute(b),g=b.find('[role="header"]'),h=b.find('[role="dial"] span');g.children('[role="hour"]').text(e),g.children('[role="minute"]').text(gj.core.pad(f)),h.removeClass("selected"),h.filter(function(a){return"hours"==c.dialMode?parseInt($(this).text(),10)==e:parseInt($(this).text(),10)==f}).addClass("selected"),"ampm"===c.mode&&(d>=12?(g.find('[role="pm"]').addClass("selected"),g.find('[role="am"]').removeClass("selected")):(g.find('[role="am"]').addClass("selected"),g.find('[role="pm"]').removeClass("selected")))},mouseDownHandler:function(a,b){return function(b){a.mouseMove=!0}},mouseMoveHandler:function(a,b){return function(c){a.mouseMove&&gj.timepicker.methods.updateArrow(c,a,b)}},mouseUpHandler:function(a,b){return function(c){gj.timepicker.methods.updateArrow(c,a,b),a.mouseMove=!1,a.data().modal||(clearTimeout(a.timeout),a.focus())}},renderHours:function(a,b){var c=b.find('[role="dial"]');clearTimeout(a.timeout),c.empty(),c.append('<div role="arrow" style="transform: rotate(-90deg); display: none;"><div class="arrow-begin"></div><div class="arrow-end"></div></div>'),c.append('<span role="hour" style="transform: translate(54px, -93.5307px);">1</span>'),c.append('<span role="hour" style="transform: translate(93.5307px, -54px);">2</span>'),c.append('<span role="hour" style="transform: translate(108px, 0px);">3</span>'),c.append('<span role="hour" style="transform: translate(93.5307px, 54px);">4</span>'),c.append('<span role="hour" style="transform: translate(54px, 93.5307px);">5</span>'),c.append('<span role="hour" style="transform: translate(6.61309e-15px, 108px);">6</span>'),c.append('<span role="hour" style="transform: translate(-54px, 93.5307px);">7</span>'),c.append('<span role="hour" style="transform: translate(-93.5307px, 54px);">8</span>'),c.append('<span role="hour" style="transform: translate(-108px, 1.32262e-14px);">9</span>'),c.append('<span role="hour" style="transform: translate(-93.5307px, -54px);">10</span>'),c.append('<span role="hour" style="transform: translate(-54px, -93.5307px);">11</span>'),c.append('<span role="hour" style="transform: translate(-1.98393e-14px, -108px);">12</span>'),"24hr"===a.data("mode")&&(c.append('<span role="hour" style="transform: translate(38px, -65.8179px);">13</span>'),c.append('<span role="hour" style="transform: translate(65.8179px, -38px);">14</span>'),c.append('<span role="hour" style="transform: translate(76px, 0px);">15</span>'),c.append('<span role="hour" style="transform: translate(65.8179px, 38px);">16</span>'),c.append('<span role="hour" style="transform: translate(38px, 65.8179px);">17</span>'),c.append('<span role="hour" style="transform: translate(4.65366e-15px, 76px);">18</span>'),c.append('<span role="hour" style="transform: translate(-38px, 65.8179px);">19</span>'),c.append('<span role="hour" style="transform: translate(-65.8179px, 38px);">20</span>'),c.append('<span role="hour" style="transform: translate(-76px, 9.30732e-15px);">21</span>'),c.append('<span role="hour" style="transform: translate(-65.8179px, -38px);">22</span>'),c.append('<span role="hour" style="transform: translate(-38px, -65.8179px);">23</span>'),c.append('<span role="hour" style="transform: translate(-1.3961e-14px, -76px);">00</span>')),b.find('[role="header"] [role="hour"]').addClass("selected"),b.find('[role="header"] [role="minute"]').removeClass("selected"),a.data("dialMode","hours"),gj.timepicker.methods.select(a,b)},renderMinutes:function(a,b){var c=b.find('[role="dial"]');clearTimeout(a.timeout),c.empty(),c.append('<div role="arrow" style="transform: rotate(-90deg); display: none;"><div class="arrow-begin"></div><div class="arrow-end"></div></div>'),c.append('<span role="hour" style="transform: translate(54px, -93.5307px);">5</span>'),c.append('<span role="hour" style="transform: translate(93.5307px, -54px);">10</span>'),c.append('<span role="hour" style="transform: translate(108px, 0px);">15</span>'),c.append('<span role="hour" style="transform: translate(93.5307px, 54px);">20</span>'),c.append('<span role="hour" style="transform: translate(54px, 93.5307px);">25</span>'),c.append('<span role="hour" style="transform: translate(6.61309e-15px, 108px);">30</span>'),c.append('<span role="hour" style="transform: translate(-54px, 93.5307px);">35</span>'),c.append('<span role="hour" style="transform: translate(-93.5307px, 54px);">40</span>'),c.append('<span role="hour" style="transform: translate(-108px, 1.32262e-14px);">45</span>'),c.append('<span role="hour" style="transform: translate(-93.5307px, -54px);">50</span>'),c.append('<span role="hour" style="transform: translate(-54px, -93.5307px);">55</span>'),c.append('<span role="hour" style="transform: translate(-1.98393e-14px, -108px);">00</span>'),b.find('[role="header"] [role="hour"]').removeClass("selected"),b.find('[role="header"] [role="minute"]').addClass("selected"),a.data("dialMode","minutes"),gj.timepicker.methods.select(a,b)},open:function(a){var b,c,d,e=a.data(),f=$("body").find('[role="clock"][guid="'+a.attr("data-guid")+'"]');b=a.value()?gj.core.parseDate(a.value(),e.format,e.locale):new Date,c=b.getHours(),"ampm"===e.mode&&f.attr("mode",c>12?"pm":"am"),f.attr("hour",c),f.attr("minute",b.getMinutes()),gj.timepicker.methods.renderHours(a,f),f.show(),f.closest('div[role="modal"]').show(),e.modal?gj.core.center(f):(d=a.offset(),f.css("left",d.left).css("top",d.top+a.outerHeight(!0)+3),a.focus()),gj.timepicker.events.open(a)},close:function(a){var b=$("body").find('[role="clock"][guid="'+a.attr("data-guid")+'"]');b.hide(),b.closest('div[role="modal"]').hide(),gj.timepicker.events.close(a)},value:function(a,b){a.data();return void 0===b?a.val():(a.val(b),gj.timepicker.events.change(a),a)},destroy:function(a){var b=a.data(),c=a.parent(),d=$("body").find('[role="clock"][guid="'+a.attr("data-guid")+'"]');return b&&(a.off(),d.parent('[role="modal"]').length>0&&d.unwrap(),d.remove(),a.removeData(),a.removeAttr("data-type").removeAttr("data-guid").removeAttr("data-timepicker"),a.removeClass(),c.children('[role="right-icon"]').remove(),a.unwrap()),a}},gj.timepicker.events={change:function(a){return a.triggerHandler("change")},open:function(a){return a.triggerHandler("open")},close:function(a){return a.triggerHandler("close")}},gj.timepicker.widget=function(a,b){var c=this,d=gj.timepicker.methods;return c.mouseMove=!1,c.value=function(a){return d.value(this,a)},c.destroy=function(){return d.destroy(this)},c.open=function(){gj.timepicker.methods.open(this)},c.close=function(){gj.timepicker.methods.close(this)},$.extend(a,c),"true"!==a.attr("data-timepicker")&&d.init.call(a,b),a},gj.timepicker.widget.prototype=new gj.widget,gj.timepicker.widget.constructor=gj.timepicker.widget,function(a){a.fn.timepicker=function(a){var b;if(this&&this.length){if("object"!=typeof a&&a){if(b=new gj.timepicker.widget(this,null),b[a])return b[a].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+a+" does not exist."}return new gj.timepicker.widget(this,a)}}}(jQuery),gj.timepicker.messages["bg-bg"]={am:"AM",pm:"PM",ok:"ОК",cancel:"Отказ"},gj.timepicker.messages["fr-fr"]={am:"AM",pm:"PM",ok:"OK",cancel:"Annuler"},gj.timepicker.messages["de-de"]={am:"AM",pm:"PM",ok:"OK",cancel:"Abbrechen"},gj.timepicker.messages["pt-br"]={am:"AM",pm:"PM",ok:"OK",cancel:"Cancelar"},gj.timepicker.messages["ru-ru"]={am:"AM",pm:"PM",ok:"ОК",cancel:"Отмена"};