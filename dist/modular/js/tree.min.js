gj.tree={plugins:{}},gj.tree.config={base:{params:{},autoLoad:!0,selectionType:"single",cascadeSelection:!1,dataSource:void 0,primaryKey:void 0,textField:"text",childrenField:"children",hasChildrenField:"hasChildren",imageCssClassField:"imageCssClass",imageUrlField:"imageUrl",imageHtmlField:"imageHtml",disabledField:"disabled",width:void 0,border:!1,uiLibrary:"materialdesign",iconsLibrary:"materialicons",autoGenId:1,autoGenFieldName:"autoId_b5497cc5-7ef3-49f5-a7dc-4a932e1aee4a",indentation:24,style:{wrapper:"gj-unselectable",list:"gj-list gj-list-md",item:void 0,active:"gj-list-md-active",inactive:"gj-list-md-inactive",leafIcon:void 0,border:"gj-tree-md-border"},icons:{expand:'<i class="gj-icon chevron-right" />',collapse:'<i class="gj-icon chevron-down" />'}},bootstrap:{style:{wrapper:"gj-unselectable gj-tree-bootstrap-3",list:"gj-list gj-list-bootstrap list-group",item:"list-group-item",active:"active",inactive:"",border:"gj-tree-bootstrap-border"},iconsLibrary:"glyphicons"},bootstrap4:{style:{wrapper:"gj-unselectable gj-tree-bootstrap-4",list:"gj-list gj-list-bootstrap",item:"list-group-item",active:"active",inactive:"",border:"gj-tree-bootstrap-border"},icons:{expand:'<i class="gj-icon plus" />',collapse:'<i class="gj-icon minus" />'}},bootstrap5:{style:{wrapper:"gj-unselectable gj-tree-bootstrap-5",list:"gj-list gj-list-bootstrap",item:"list-group-item",active:"active",inactive:"inactive",border:"gj-tree-bootstrap-border"},icons:{expand:'<i class="gj-icon plus" />',collapse:'<i class="gj-icon minus" />'}},materialicons:{style:{expander:"gj-tree-material-icons-expander"}},fontawesome:{style:{expander:"gj-tree-font-awesome-expander"},icons:{expand:'<i class="fa fa-plus" aria-hidden="true"></i>',collapse:'<i class="fa fa-minus" aria-hidden="true"></i>'}},glyphicons:{style:{expander:"gj-tree-glyphicons-expander"},icons:{expand:'<span class="glyphicon glyphicon-plus" />',collapse:'<span class="glyphicon glyphicon-minus" />'}}},gj.tree.events={initialized:function(e){e.dispatchEvent(new Event("initialized"))},dataBinding:function(e){e.dispatchEvent(new Event("dataBinding"))},dataBound:function(e){e.dispatchEvent(new Event("dataBound"))},select:function(e,t,r){return e.dispatchEvent(new CustomEvent("select",{detail:{node:t,id:r}}))},unselect:function(e,t,r){return e.dispatchEvent(new CustomEvent("unselect",{detail:{node:t,id:r}}))},expand:function(e,t,r){return e.dispatchEvent(new CustomEvent("expand",{detail:{node:t,id:r}}))},collapse:function(e,t,r){return e.dispatchEvent(new CustomEvent("collapse",{detail:{node:t,id:r}}))},enable:function(e,t){return e.dispatchEvent(new CustomEvent("enable",{detail:{node:t}}))},disable:function(e,t){return e.dispatchEvent(new CustomEvent("disable",{detail:{node:t}}))},destroying:function(e){return e.dispatchEvent(new Event("destroying"))},nodeDataBound:function(e,t,r,n){return e.dispatchEvent(new CustomEvent("nodeDataBound",{detail:{node:t,id:r,record:n}}))}},gj.tree.methods={init:function(e){return gj.widget.prototype.init.call(this,e),gj.tree.methods.initialize.call(this),this.getConfig().autoLoad&&this.reload(),this},initialize:function(){var e=this.getConfig(),t=this.wrap("div");gj.core.addClasses(this.element,e.style.list),gj.core.addClasses(t,e.style.wrapper),this.element.setAttribute("data-gj-type",this.type),e.width&&gj.core.css(t,"width",e.width),e.border&&gj.core.addClasses(t,e.style.border),gj.tree.events.initialized(this.element)},useHtmlDataSource:function(e,t){t.dataSource=[]},render:function(e,t){var r;return t&&("string"==typeof t&&JSON&&(t=JSON.parse(t)),r=e.getConfig(),e.setRecords(t),r.primaryKey||gj.tree.methods.genAutoId(r,t),gj.tree.methods.loadData(e)),e},filter:function(e){return e.getConfig().dataSource},genAutoId:function(e,t){let r;for(r=0;r<t.length;r++)t[r][e.autoGenFieldName]=e.autoGenId++,t[r][e.childrenField]&&t[r][e.childrenField].length&&gj.tree.methods.genAutoId(e,t[r][e.childrenField])},loadData:function(e){let t,r=e.getRecords();for(gj.tree.events.dataBinding(e.element),e.off(),e.element.innerHTML="",t=0;t<r.length;t++)gj.tree.methods.appendNode(e,e.element,r[t],1);gj.tree.events.dataBound(e.element)},appendNode:function(e,t,r,n,a){let i,o,l,d,s,c,g,p,u,h=e.getConfig(),j=h.primaryKey?r[h.primaryKey]:r[h.autoGenFieldName],f=void 0!==r[h.hasChildrenField]&&"true"===r[h.hasChildrenField].toString().toLowerCase(),m=void 0!==r[h.disabledField]&&"true"===r[h.disabledField].toString().toLowerCase();if((o=document.createElement("li")).setAttribute("data-gj-id",j),o.setAttribute("data-gj-role","node"),gj.core.addClasses(o,h.style.item),(l=document.createElement("div")).setAttribute("data-gj-role","wrapper"),(d=document.createElement("span")).setAttribute("data-gj-role","expander"),d.setAttribute("data-gj-mode","close"),gj.core.addClasses(d,h.style.expander),(s=document.createElement("span")).setAttribute("data-gj-role","display"),s.innerHTML=r[h.textField],h.indentation&&((c=document.createElement("span")).setAttribute("data-gj-role","spacer"),c.style.width=h.indentation*(n-1)/16+"rem",l.appendChild(c)),m?gj.tree.methods.disableNode(e,o):(gj.core.on(d,"click",gj.tree.methods.expanderClickHandler(e)),gj.core.on(s,"click",gj.tree.methods.displayClickHandler(e))),l.appendChild(d),l.appendChild(s),o.appendChild(l),a?t.insertBefore(o,t.children[a-1]):t.appendChild(o),h.imageCssClassField&&r[h.imageCssClassField]?((p=document.createElement("span")).setAttribute("data-gj-role","image"),p.innerHTML='<span class="'+r[h.imageCssClassField]+'"></span>',l.insertBefore(p,s)):h.imageUrlField&&r[h.imageUrlField]?((p=document.createElement("span")).setAttribute("data-gj-role","image"),l.insertBefore(p,s),(u=document.createElement("img")).setAttribute("src",r[h.imageUrlField]),u.setAttribute("width",gj.core.width(p)),u.setAttribute("height",gj.core.height(p)),p.appendChild(u)):h.imageHtmlField&&r[h.imageHtmlField]&&((p=document.createElement("span")).setAttribute("data-gj-role","image"),p.innerHTML=r[h.imageHtmlField],l.insertBefore(p,s)),r[h.childrenField]&&r[h.childrenField].length||f){if(d.innerHTML=h.icons.expand,g=document.createElement("ul"),gj.core.addClasses(g,h.style.list+" gj-hidden"),o.appendChild(g),r[h.childrenField]&&r[h.childrenField].length)for(i=0;i<r[h.childrenField].length;i++)gj.tree.methods.appendNode(e,g,r[h.childrenField][i],n+1)}else h.style.leafIcon?gj.core.addClasses(d,h.style.leafIcon):d.innerHTML="&nbsp;";gj.tree.events.nodeDataBound(e.element,o,r.id,r)},expanderClickHandler:function(r){return function(e){var t=this.closest("li");"close"===this.getAttribute("data-gj-mode")?r.expand(t):r.collapse(t)}},expand:function(e,t,r){let n,a,i=gj.core.select(t,'[data-gj-role="wrapper"]>[data-gj-role="expander"]'),o=e.getConfig(),l=t.getAttribute("data-gj-id"),d=t.querySelector("ul");if(!1!==gj.tree.events.expand(e.element,t,l)&&d&&(d.style.display="block",i.setAttribute("data-gj-mode","open"),i.innerHTML=o.icons.collapse,r))for(n=t.querySelectorAll("ul>li"),a=0;a<n.length;a++)gj.tree.methods.expand(e,n[a],r);return e},collapse:function(e,t,r){let n,a,i=gj.core.select(t,'[data-gj-role="wrapper"]>[data-gj-role="expander"]'),o=e.getConfig(),l=t.getAttribute("data-gj-id"),d=t.querySelector("ul");if(!1!==gj.tree.events.collapse(e.element,t,l)&&d&&(d.style.display="none",i.setAttribute("data-gj-mode","close"),i.innerHTML=o.icons.expand,r))for(n=t.querySelectorAll('ul>li>[data-gj-role="wrapper"]>span[data-gj-mode="open"]'),a=0;a<n.length;a++)gj.tree.methods.collapse(e,n[a],r);return e},expandAll:function(e){let t,r=gj.core.selectAll(e.element,"li");for(t=0;t<r.length;t++)gj.tree.methods.expand(e,r[t],!0);return e},collapseAll:function(e){let t,r=gj.core.selectAll(e.element,"li");for(t=0;t<r.length;t++)gj.tree.methods.collapse(e,r[t],!0);return e},displayClickHandler:function(r){return function(){var e=this.closest("li"),t=r.getConfig();cascade=t.cascadeSelection,"true"===e.getAttribute("data-gj-selected")?gj.tree.methods.unselect(r,e,cascade):("single"===t.selectionType&&gj.tree.methods.unselectAll(r),gj.tree.methods.select(r,e,cascade))}},selectAll:function(e){let t,r=gj.core.selectAll(e.element,"li");for(t=0;t<r.length;t++)gj.tree.methods.select(e,r[t],!0);return e},select:function(r,n,a){var e=r.getConfig(),t=!1!==gj.tree.events.select(r.element,n,n.getAttribute("data-gj-id"))&&!n.classList.contains("disabled");if("true"!==n.getAttribute("data-gj-selected")&&t&&(gj.core.removeClasses(n,e.style.inactive),gj.core.addClasses(n,e.style.active),n.setAttribute("data-gj-selected","true")),a&&t)for(let t=0;t<n.children.length;t++)if("UL"===n.children[t].tagName.toUpperCase())for(let e=0;e<n.children[t].children.length;e++)"LI"===n.children[t].children[e].tagName.toUpperCase()&&gj.tree.methods.select(r,n.children[t].children[e],a)},unselectAll:function(e){let t,r=gj.core.selectAll(e.element,"li");for(t=0;t<r.length;t++)gj.tree.methods.unselect(e,r[t],!0);return e},unselect:function(r,n,a){var e=r.getConfig(),t=!1!==gj.tree.events.unselect(r.element,n,n.getAttribute("data-gj-id"))&&!n.classList.contains("disabled");if("true"===n.getAttribute("data-gj-selected")&&t&&(gj.core.removeClasses(n,e.style.active),gj.core.addClasses(n,e.style.inactive),n.removeAttribute("data-gj-selected")),a&&t)for(let t=0;t<n.children.length;t++)if("UL"===n.children[t].tagName.toUpperCase())for(let e=0;e<n.children[t].children.length;e++)"LI"===n.children[t].children[e].tagName.toUpperCase()&&gj.tree.methods.unselect(r,n.children[t].children[e],a)},getSelections:function(e){var t=[],r=e.querySelectorAll("li");if(r&&r.length)for(let e=0;e<r.length;e++)"true"===r[e].getAttribute("data-gj-selected")&&t.push(r[e].getAttribute("data-gj-id"));return t},getDataById:function(e,t,r){let n,a=e.getConfig(),i=void 0;for(n=0;n<r.length;n++){if(a.primaryKey&&r[n][a.primaryKey]==t){i=r[n];break}if(r[n][a.autoGenFieldName]==t){i=r[n];break}if(r[n][a.childrenField]&&r[n][a.childrenField].length&&(i=gj.tree.methods.getDataById(e,t,r[n][a.childrenField])))break}return i},getDataByText:function(e,t,r){let n,a=void 0,i=e.getConfig();for(n=0;n<r.length;n++){if(t===r[n][i.textField]){a=r[n];break}if(r[n][i.childrenField]&&r[n][i.childrenField].length&&(a=gj.tree.methods.getDataByText(e,t,r[n][i.childrenField])))break}return a},getNodeById:function(e,t){let r,n,a=void 0,i=e.querySelectorAll("li");if(i&&i.length)for(r=0;r<i.length;r++)if(t==(n=i[r]).getAttribute("data-gj-id")){a=n;break}return a},getNodeByText:function(e,t){let r,n,a=void 0,i=e.querySelectorAll("li");if(i&&i.length)for(r=0;r<i.length;r++)if(n=i[r],t===gj.core.select(n,'[data-gj-role="wrapper"]>[data-gj-role="display"]').innerText){a=n;break}return a},addNode:function(e,t,r,n){var a,i=e.getConfig();return r?("LI"===r.tagName.toUpperCase()&&(r.querySelector("ul")||(r.querySelector('[data-gj-role="expander"]').innerHTML=i.icons.collapse,r.appendChild(gj.core.addClasses(document.createElement("ul"),i.style.list))),r=r.querySelector("ul")),(a=e.getDataById(r.parentNode.getAttribute("data-gj-id")))[i.childrenField]||(a[i.childrenField]=[]),a[i.childrenField].push(t)):(r=e.element,(a=e.getRecords()).push(t),e.setRecords(a)),a=gj.tree.methods.getLevel(r),i.primaryKey||gj.tree.methods.genAutoId(i,[t]),gj.tree.methods.appendNode(e,r,t,a,n),e},getLevel:function(e){let t=1,r=e.parentNode;for(;r&&"tree"!==r.getAttribute("data-gj-type")&&"tree"!==e.getAttribute("data-gj-type");)t++,r=r.parentNode;return t},remove:function(e,t){return gj.tree.methods.removeDataById(e,t.getAttribute("data-gj-id"),e.getRecords()),t.remove(),e},removeDataById:function(e,t,r){let n,a=e.getConfig();for(n=0;n<r.length;n++){if(a.primaryKey&&r[n][a.primaryKey]==t){r.splice(n,1);break}if(r[n][a.autoGenFieldName]==t){r.splice(n,1);break}r[n][a.childrenField]&&r[n][a.childrenField].length&&gj.tree.methods.removeDataById(e,t,r[n][a.childrenField])}},update:function(e,t,r){var n=e.getConfig(),a=e.getNodeById(t);e.getDataById(t);return a.querySelector('>[data-gj-role="wrapper"]>[data-gj-role="display"]').innerHTML=r[n.textField],gj.tree.events.nodeDataBound(e.element,a,t,r),e},getChildren:function(e,t){let r=[],n,a;for(t=void 0===t||t,a=t?e.querySelectorAll("ul>li"):gj.core.selectAll(e,"ul>li"),n=0;n<a.length;n++)r.push(a[n].getAttribute("data-gj-id"));return r},enableAll:function(e){let t,r=gj.core.selectAll(e.element,"li");for(t=0;t<r.length;t++)gj.tree.methods.enableNode(e,r[t],!0);return e},enableNode:function(e,t,r){let n,a,i=gj.core.select(t,'[data-gj-role="wrapper"]>[data-gj-role="expander"]'),o=gj.core.select(t,'[data-gj-role="wrapper"]>[data-gj-role="display"]');if(i&&o&&(r=void 0===r||r,t.classList.remove("disabled"),gj.core.on(i,"click",gj.tree.methods.expanderClickHandler(e)),gj.core.on(o,"click",gj.tree.methods.displayClickHandler(e)),gj.tree.events.enable(e.element,t),r))for(a=gj.core.selectAll(t,"ul>li"),n=0;n<a.length;n++)gj.tree.methods.enableNode(e,a[n],r)},disableAll:function(e){let t,r=gj.core.selectAll(e.element,"li");for(t=0;t<r.length;t++)gj.tree.methods.disableNode(e,r[t],!0);return e},disableNode:function(e,t,r){let n,a,i=t.querySelector('[data-gj-role="wrapper"]>[data-gj-role="expander"]'),o=t.querySelector('[data-gj-role="wrapper"]>[data-gj-role="display"]');if(i&&o&&(r=void 0===r||r,t.classList.add("disabled"),gj.core.off(i,"click"),gj.core.off(o,"click"),gj.tree.events.disable(e.element,t),r))for(a=gj.core.selectAll(t,"ul>li"),n=0;n<a.length;n++)gj.tree.methods.disableNode(e,a[n],r)},destroy:function(e){return e.getConfig()&&(gj.tree.events.destroying(e.element),e.xhr&&e.xhr.abort(),e.off(),e.removeConfig(),grid.removeRecords(),grid.removeTotalRecords(),e.element.removeAttribute("data-gj-guid"),e.element.removeAttribute("data-gj-type"),e.element.setAttribute("class",""),e.element.innerHTML=""),e},pathFinder:function(e,t,r,n){let a,i=!1;for(a=0;a<t.length;a++){if(t[a].id==r){i=!0;break}if(t[a][e.childrenField]&&gj.tree.methods.pathFinder(e,t[a][e.childrenField],r,n)){n.push(t[a][e.textField]),i=!0;break}}return i}},(GijgoTree=function(e,t){var r=this,n=gj.tree.methods;return r.type="tree",r.element=e,r.reload=function(e){return gj.widget.prototype.reload.call(this,e)},r.render=function(e){return n.render(this,e)},r.addNode=function(e,t,r){return n.addNode(this,e,t,r)},r.removeNode=function(e){return n.remove(this,e)},r.updateNode=function(e,t){return n.update(this,e,t)},r.destroy=function(){return n.destroy(this)},r.expand=function(e,t){return n.expand(this,e,t)},r.collapse=function(e,t){return n.collapse(this,e,t)},r.expandAll=function(){return n.expandAll(this)},r.collapseAll=function(){return n.collapseAll(this)},r.getDataById=function(e){return n.getDataById(this,e,this.getRecords())},r.getDataByText=function(e){return n.getDataByText(this,e,this.getRecords())},r.getNodeById=function(e){return n.getNodeById(this.element,e)},r.getNodeByText=function(e){return n.getNodeByText(this.element,e)},r.getAll=function(){return this.getRecords()},r.select=function(e){return n.select(this,e)},r.unselect=function(e){return n.unselect(this,e)},r.selectAll=function(){return n.selectAll(this)},r.unselectAll=function(){return n.unselectAll(this)},r.getSelections=function(){return n.getSelections(this.element)},r.getChildren=function(e,t){return n.getChildren(e,t)},r.parents=function(e){var t=[];return n.pathFinder(this.getConfig(),this.getRecords(),e,t),t.reverse()},r.enable=function(e,t){return n.enableNode(this,e,t)},r.enableAll=function(){return n.enableAll(this)},r.disable=function(e,t){return n.disableNode(this,e,t)},r.disableAll=function(){return n.disableAll(this)},"tree"!==e.getAttribute("data-gj-type")&&n.init.call(r,t),r}).prototype=new gj.widget,GijgoTree.constructor=GijgoTree,"undefined"!=typeof jQuery&&(jQuery.fn.tree=function(e){var t;if(this&&this.length){if("object"!=typeof e&&e){if((t=new GijgoTree(this,null))[e])return t[e].apply(this,Array.prototype.slice.call(arguments,1));throw"Method "+e+" does not exist."}return new GijgoTree(this,e)}}),gj.tree.plugins.checkboxes={config:{base:{checkboxes:void 0,checkedField:"checked",cascadeCheck:!0}},private:{dataBound:function(e){var t;if(e.getConfig().cascadeCheck)for(const r of e.element.querySelectorAll('li[data-gj-role="node"]'))(t=r.querySelector('[data-gj-role="checkbox"] input[type="checkbox"]'))&&"checked"===(t=gj.checkbox.methods.state(t))&&(gj.tree.plugins.checkboxes.private.updateChildrenState(r,t),gj.tree.plugins.checkboxes.private.updateParentState(r,t))},nodeDataBound:function(t,r,e,n){let a,i,o,l,d;gj.core.select(r,'[data-gj-role="wrapper"]>[data-gj-role="checkbox"]')||(a=t.getConfig(),i=gj.core.select(r,'[data-gj-role="wrapper"]>[data-gj-role="display"]'),(o=document.createElement("input")).setAttribute("type","checkbox"),(l=document.createElement("span")).setAttribute("data-gj-role","checkbox"),l.appendChild(o),i.parentNode.insertBefore(l,i),d=void 0!==n[a.disabledField]&&"true"===n[a.disabledField].toString().toLowerCase(),o=new GijgoCheckBox(o,{uiLibrary:a.uiLibrary,iconsLibrary:a.iconsLibrary,change:function(e){e=gj.checkbox.methods.state(e.target);gj.tree.plugins.checkboxes.events.checkboxChange(t.element,r,n,e)}}),d&&(o.element.disabled=!0),n[a.checkedField]&&o.state("checked"),o.on("click",function(e){var t=this.closest("li"),r=gj.checkbox.methods.state(this);a.cascadeCheck&&(gj.tree.plugins.checkboxes.private.updateChildrenState(t,r),gj.tree.plugins.checkboxes.private.updateParentState(t,r))}))},updateParentState:function(e,t){let r,n,a,i,o,l;if((r=e.parentNode.parentNode)&&"node"===r.getAttribute("data-gj-role")){n=r.querySelector('[data-gj-role="wrapper"] > [data-gj-role="checkbox"] input[type="checkbox"]'),a=e.parentNode.querySelectorAll('[data-gj-role="wrapper"] > span[data-gj-role="checkbox"] input[type="checkbox"]'),i="checked"===t,o="unchecked"===t,l="indeterminate";for(const s of a){var d=gj.checkbox.methods.state(s);i&&"checked"!==d&&(i=!1),o&&"unchecked"!==d&&(o=!1)}i&&!o&&(l="checked"),!i&&o&&(l="unchecked"),gj.checkbox.methods.state(n,l),gj.tree.plugins.checkboxes.private.updateParentState(r,l)}},updateChildrenState:function(e,t){for(const r of e.querySelectorAll('ul li [data-gj-role="wrapper"] [data-gj-role="checkbox"] input[type="checkbox"]'))gj.checkbox.methods.state(r,t)},update:function(e,t,r){var n=t.querySelector('[data-gj-role="checkbox"] input[type="checkbox"]');gj.checkbox.methods.state(n,r),e.getConfig().cascadeCheck&&(gj.tree.plugins.checkboxes.private.updateChildrenState(t,r),gj.tree.plugins.checkboxes.private.updateParentState(t,r))}},public:{getCheckedNodes:function(){var e=[];for(const t of this.element.querySelectorAll('li [data-gj-role="checkbox"] input[type="checkbox"]'))"checked"===gj.checkbox.methods.state(t)&&e.push(t.closest("li").getAttribute("data-gj-id"));return e},checkAll:function(){for(const e of this.element.querySelectorAll('li [data-gj-role="checkbox"] input[type="checkbox"]'))gj.checkbox.methods.state(e,"checked");return this},uncheckAll:function(){for(const e of this.element.querySelectorAll('li [data-gj-role="checkbox"] input[type="checkbox"]'))gj.checkbox.methods.state(e,"unchecked");return this},check:function(e){return gj.tree.plugins.checkboxes.private.update(this,e,"checked"),this},uncheck:function(e){return gj.tree.plugins.checkboxes.private.update(this,e,"unchecked"),this}},events:{checkboxChange:function(e,t,r,n){return e.dispatchEvent(new CustomEvent("checkboxChange",{detail:{node:t,record:r,state:n}}))}},configure:function(t){t.getConfig().checkboxes&&gj.checkbox&&(t.extend(t,gj.tree.plugins.checkboxes.public),t.on("nodeDataBound",function(e){gj.tree.plugins.checkboxes.private.nodeDataBound(t,e.detail.node,e.detail.id,e.detail.record)}),t.on("dataBound",function(){gj.tree.plugins.checkboxes.private.dataBound(t)}),t.on("enable",function(e){e=e.detail.node.querySelector('[data-gj-role="wrapper"]>[data-gj-role="checkbox"] input[type="checkbox"]');e&&(e.disabled=!1)}),t.on("disable",function(e){e=e.detail.node.querySelector('[data-gj-role="wrapper"]>[data-gj-role="checkbox"] input[type="checkbox"]');e&&(e.disabled=!0)}))}},gj.tree.plugins.dragAndDrop={config:{base:{dragAndDrop:void 0,style:{dragEl:"gj-tree-drag-el gj-tree-md-drag-el",dropAsChildIcon:"gj-cursor-pointer gj-icon plus",dropAbove:"gj-tree-drop-above",dropBelow:"gj-tree-drop-below"}},bootstrap:{style:{dragEl:"gj-tree-drag-el gj-tree-bootstrap-drag-el",dropAsChildIcon:"glyphicon glyphicon-plus",dropAbove:"drop-above",dropBelow:"drop-below"}},bootstrap4:{style:{dragEl:"gj-tree-drag-el gj-tree-bootstrap-drag-el",dropAsChildIcon:"gj-cursor-pointer gj-icon plus",dropAbove:"drop-above",dropBelow:"drop-below"}}},private:{nodeDataBound:function(e,t){var r=t.querySelector('>[data-gj-role="wrapper"]'),n=t.querySelector('>[data-gj-role="wrapper"]>[data-gj-role="display"]');r&&n&&(n.addEventListener("mousedown",gj.tree.plugins.dragAndDrop.private.createNodeMouseDownHandler(e)),n.addEventListener("mousemove",gj.tree.plugins.dragAndDrop.private.createNodeMouseMoveHandler(e,t,n)),n.addEventListener("mouseup",gj.tree.plugins.dragAndDrop.private.createNodeMouseUpHandler(e)))},createNodeMouseDownHandler:function(t){return function(e){t.element.setAttribute("data-gj-drag-ready",!0)}},createNodeMouseUpHandler:function(t){return function(e){t.element.setAttribute("data-gj-drag-ready",!1)}},createNodeMouseMoveHandler:function(d,s,c){return function(e){if("true"===d.element.getAttribute("data-gj-drag-ready")){let e=d.getConfig(),t,r,n,a,i,o,l;d.element.setAttribute("data-gj-drag-ready",!1),(t=c.cloneNode()).setAttribute("data-gj-role","draggable-clone"),t.classList.add("gj-unselectable"),gj.core.addClasses(t,e.style.dragEl),r=gj.core.wrap(t,"div"),n=document.createElement("ul"),gj.core.addClasses(n,e.style.list),r.appendChild(n),a=document.createElement("li"),gj.core.addClasses(a,e.style.item),n.appendChild(a),document.body.appendChild(t),(i=document.createElement("span")).setAttribute("data-gj-role","indicator"),r.parentNode.insertBefore(i,r),new GijgoDraggable(t,{drag:gj.tree.plugins.dragAndDrop.private.createDragHandler(d,s,c),stop:gj.tree.plugins.dragAndDrop.private.createDragStopHandler(d,s,c)}),r=c.parent(),o=c.offset().top,o-=parseInt(r.css("border-top-width"))+parseInt(r.css("margin-top"))+parseInt(r.css("padding-top")),l=c.offset().left,l=(l-=parseInt(r.css("border-left-width"))+parseInt(r.css("margin-left"))+parseInt(r.css("padding-left")))-t.find('[data-gj-role="indicator"]').outerWidth(!0),t.css({position:"absolute",top:o,left:l,width:c.outerWidth(!0)}),"true"===c.attr("data-droppable")&&c.droppable("destroy"),gj.tree.plugins.dragAndDrop.private.getTargetDisplays(d,s,c).each(function(){"true"===this.attr("data-droppable")&&this.droppable("destroy"),this.droppable()}),gj.tree.plugins.dragAndDrop.private.getTargetDisplays(d,s).each(function(){"true"===this.attr("data-droppable")&&this.droppable("destroy"),this.droppable()}),t.trigger("mousedown")}}},getTargetDisplays:function(e,t,r){return e.find('[data-gj-role="display"]').not(r).not(t.find('[data-gj-role="display"]'))},getTargetWrappers:function(e,t){return e.find('[data-gj-role="wrapper"]').not(t.find('[data-gj-role="wrapper"]'))},createDragHandler:function(e,t,r){let i=gj.tree.plugins.dragAndDrop.private.getTargetDisplays(e,t,r),o=gj.tree.plugins.dragAndDrop.private.getTargetWrappers(e,t),l=e.getConfig();return function(e,t,r){let n=this,a=!1;i.each(function(){var e;if(this.droppable("isOver",r))return e=n.find('[data-gj-role="indicator"]'),l.style.dropAsChildIcon?e.addClass(l.style.dropAsChildIcon):e.text("+"),!(a=!0);n.find('[data-gj-role="indicator"]').removeClass(l.style.dropAsChildIcon).empty()}),o.each(function(){var e,t=this;!a&&t.droppable("isOver",r)?(e=t.position().top+t.outerHeight()/2,r.y<e?t.addClass(l.style.dropAbove).removeClass(l.style.dropBelow):t.addClass(l.style.dropBelow).removeClass(l.style.dropAbove)):t.removeClass(l.style.dropAbove).removeClass(l.style.dropBelow)})}},createDragStopHandler:function(d,s,e){let n=gj.tree.plugins.dragAndDrop.private.getTargetDisplays(d,s,e),c=gj.tree.plugins.dragAndDrop.private.getTargetWrappers(d,s),g=d.getConfig();return function(e,a){let t=!1,i,o,l,r;this.draggable("destroy").remove(),n.each(function(){let e;if(this.droppable("isOver",a))return o=this.closest("li"),l=s.parent("ul").parent("li"),0===(e=o.children("ul")).length&&(e="<ul />".addClass(g.style.list),o.append(e)),!1!==gj.tree.plugins.dragAndDrop.events.nodeDrop(d,s.data("id"),o.data("id"),e.children("li").length+1)&&(e.append(s),i=d.getDataById(s.data("id")),gj.tree.methods.removeDataById(d,s.data("id"),g.records),void 0===(r=d.getDataById(e.parent().data("id")))[g.childrenField]&&(r[g.childrenField]=[]),r[g.childrenField].push(i),gj.tree.plugins.dragAndDrop.private.refresh(d,s,o,l)),!(t=!0);this.droppable("destroy")}),t||c.each(function(){var e,t,r,n=this;if(n.droppable("isOver",a))return o=n.closest("li"),l=s.parent("ul").parent("li"),e=a.y<n.position().top+n.outerHeight()/2,r=s.data("id"),t=o.prevAll('li:not([data-id="'+r+'"])').length+(e?1:2),!1!==gj.tree.plugins.dragAndDrop.events.nodeDrop(d,r,o.parent("ul").parent("li").data("id"),t)&&(i=d.getDataById(s.data("id")),gj.tree.methods.removeDataById(d,s.data("id"),g.records),d.getDataById(o.parent().data("id"))[g.childrenField].splice(o.index()+(e?0:1),0,i),e?s.insertBefore(o):s.insertAfter(o),gj.tree.plugins.dragAndDrop.private.refresh(d,s,o,l)),!1;n.droppable("destroy")})}},refresh:function(e,t,r,n){var a=e.getConfig();gj.tree.plugins.dragAndDrop.private.refreshNode(e,r),gj.tree.plugins.dragAndDrop.private.refreshNode(e,n),gj.tree.plugins.dragAndDrop.private.refreshNode(e,t),t.find('li[data-gj-role="node"]').each(function(){gj.tree.plugins.dragAndDrop.private.refreshNode(e,this)}),r.children('[data-gj-role="wrapper"]').removeClass(a.style.dropAbove).removeClass(a.style.dropBelow)},refreshNode:function(e,t){var r=t.children('[data-gj-role="wrapper"]'),n=r.children('[data-gj-role="expander"]'),a=r.children('[data-gj-role="spacer"]'),i=t.children("ul"),e=e.getConfig(),t=t.parentsUntil('[data-type="tree"]',"ul").length;i.length&&i.children().length?i.is(":visible")?n.empty().append(e.icons.collapse):n.empty().append(e.icons.expand):n.empty(),r.removeClass(e.style.dropAbove).removeClass(e.style.dropBelow),a.css("width",e.indentation*(t-1))}},public:{},events:{nodeDrop:function(e,t,r,n){return e.triggerHandler("nodeDrop",[t,r,n])}},configure:function(r){r.extend(r,gj.tree.plugins.dragAndDrop.public),r.getConfig().dragAndDrop&&gj.draggable&&gj.droppable&&r.on("nodeDataBound",function(e,t){gj.tree.plugins.dragAndDrop.private.nodeDataBound(r,t)})}},gj.tree.plugins.lazyLoading={config:{base:{paramNames:{parentId:"parentId"},lazyLoading:!1}},private:{nodeDataBound:function(e,t,r,n){e=e.getConfig(),t=gj.core.select(t,'[data-gj-role="wrapper"]>[data-gj-role="expander"]');n.hasChildren&&(t.innerHTML=e.icons.expand)},createDoneHandler:function(i,o){return function(){let e,t,r,n=i.getConfig(),a=this.response;if((a="string"==typeof a&&JSON?JSON.parse(a):a)&&a.length){for(0===(r=gj.core.select(o,"ul")).length&&(r=document.createElement("ul"),gj.core.addClasses(r,n.style.list),o.appendChild(r)),e=0;e<a.length;e++)i.addNode(a[e],r);(t=gj.core.select(o,'[data-gj-role="wrapper"]>[data-gj-role="expander"]')).setAttribute("data-gj-mode","open"),t.innerHTML=n.icons.collapse,gj.tree.events.dataBound(i.element)}}},expand:function(e,t,r){var n=e.getConfig(),a={},i=gj.core.selectAll(t,"ul>li");i&&i.length||"string"==typeof n.dataSource&&(a[n.paramNames.parentId]=r,i=n.dataSource+"?"+new URLSearchParams(a).toString(),e.xhr&&e.xhr.abort(),e.xhr=new XMLHttpRequest,e.xhr.open("GET",i,!0),e.xhr.onload=gj.tree.plugins.lazyLoading.private.createDoneHandler(e,t),e.xhr.onerror=e.createErrorHandler(),e.xhr.send())}},public:{},events:{},configure:function(t,e,r){r.lazyLoading&&(t.on("nodeDataBound",function(e){gj.tree.plugins.lazyLoading.private.nodeDataBound(t,e.detail.node,e.detail.id,e.detail.record)}),t.on("expand",function(e){gj.tree.plugins.lazyLoading.private.expand(t,e.detail.node,e.detail.id)}))}};